#!/bin/bash
# filepath: preprocess-pdf/normalize-pdf

if [ $# -eq 0 ]; then
    echo "Usage: normalize-pdf [-p password] <filename>"
    exit 1
fi

cd "$(dirname "$0")"

# Compile if needed
if [ src/main/java -nt target/classes ] || [ ! -d target/classes ]; then
    mvn -q compile
fi

# Run directly with classpath - handles spaces perfectly
java -cp "target/classes:$(mvn -q dependency:build-classpath -Dmdep.outputFile=/dev/stdout)" \
     net.boyechko.a11y.pdf_normalizer.PdfNormalizerCLI "$@"
